<div class="container">
  <div class="flex justify-center">
    <p class="txt">K-FOREST FOOD</p>
    <h3 class="txt transform-txt">
      <span>청</span>
      <span>정</span>
      <span>함</span>
      <span>,</span>
      <span>&nbsp;</span>
      <span>희</span>
      <span>소</span>
      <span>성</span>
      <span>,</span>
      <span>&nbsp;</span>
      <span>건</span>
      <span>강</span>
      <span>함</span>
      <br />
      <span>바</span>
      <span>탕</span>
      <span>으</span>
      <span>로</span>
      <span>&nbsp;</span>
      <span>철</span>
      <span>저</span>
      <span>하</span>
      <span>게</span>
    </h3>
    <p class="txt">품질관리를 거친 제품만을 선별합니다.</p>
  </div>
</div>

<script>
  $(window).on("scroll", function () {
    // #section3의 위치와 높이 가져오기
    var section2Top = $("#section2").offset().top;
    var section2Height = $("#section2").outerHeight();

    // 현재 스크롤 위치와 창의 높이 계산
    var scroll2Top = $(window).scrollTop();
    var windowHeight = $(window).height();

    // 화면에 #section2가 보이는지 확인
    //if (scroll2Top + windowHeight > section2Top) {
    // top
    if (scroll2Top + windowHeight > section2Top + section2Height / 2) {
      // helf
      //if (scroll2Top + windowHeight > section2Top + section2Height) {
      //end
      $("#section2").addClass("active");
    } else {
      $("#section2").removeClass("active");
    }
  });
</script>

<script>
  gsap.registerPlugin(ScrollTrigger);

  const txtElements = document.querySelectorAll(".txt");
  const spans = document.querySelectorAll(".transform-txt span");

  const tl = gsap.timeline({
    scrollTrigger: {
      trigger: "#section2 .flex",
      start: "top top",
      end: "bottom top",
      scrub: 1,
      pin: true,
    },
  });

  // txtElements 애니메이션 설정
  txtElements.forEach((txt, index) => {
    tl.to(
      txt,
      {
        opacity: 1,
        y: 0,
        duration: 0.5,
      },
      `+=${0.2 * index}`
    ); // 순차적 애니메이션 적용
  });

  // txtElements 애니메이션이 끝난 후 span 애니메이션 시작
  tl.addLabel("txtComplete");
  spans.forEach((span, index) => {
    tl.to(
      span,
      {
        color: "rgba(0,0,0,1)",
        duration: 0.5,
      },
      `txtComplete+=${0.1 * index}`
    );
  });
</script>
